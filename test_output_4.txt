/home/jules/.pyenv/versions/3.12.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:208: PytestDeprecationWarning: The configuration option "asyncio_default_fixture_loop_scope" is unset.
The event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: "function", "class", "module", "package", "session"

  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))
============================= test session starts ==============================
platform linux -- Python 3.12.12, pytest-8.3.4, pluggy-1.6.0
rootdir: /app
configfile: pytest.ini
plugins: requests-mock-1.12.1, github-actions-annotate-failures-0.2.0, mock-3.15.1, respx-0.21.1, cov-6.0.0, homeassistant-custom-component-0.13.205, xdist-3.6.1, syrupy-4.8.0, socket-0.7.0, asyncio-0.24.0, timeout-2.3.1, sugar-1.0.0, pytest_freezer-0.4.8, unordered-0.6.1, anyio-4.12.1, picked-0.5.0, aiohttp-1.0.5
asyncio: mode=Mode.AUTO, default_loop_scope=None
collected 159 items

tests/binary_sensor/device/test_camera_motion.py ..                      [  1%]
tests/binary_sensor/device/test_mt20_open_close.py ...                   [  3%]
tests/binary_sensor/test_switch_port.py ...                              [  5%]
tests/button/device/test_mt15_refresh_data.py ..                         [  6%]
tests/button/device/test_switch_port_cycle.py ..                         [  7%]
tests/camera/test_camera.py .........F                                   [ 13%]
tests/core/api/endpoints/test_appliance.py ........                      [ 18%]
tests/core/api/test_client.py .........                                  [ 24%]
tests/core/test_entities.py ...                                          [ 26%]
tests/core/utils/test_api_utils.py ...                                   [ 28%]
tests/core/utils/test_naming_utils.py ....                               [ 30%]
tests/core/utils/test_validation_utils.py ....                           [ 33%]
tests/discovery/handlers/test_base.py ..                                 [ 34%]
tests/discovery/handlers/test_gx.py .                                    [ 35%]
tests/discovery/handlers/test_mr.py .                                    [ 35%]
tests/discovery/handlers/test_ms.py .                                    [ 36%]
tests/discovery/handlers/test_mv.py ...                                  [ 38%]
tests/discovery/handlers/test_mx.py .                                    [ 38%]
tests/discovery/handlers/test_network.py .                               [ 39%]
tests/discovery/test_service.py ..                                       [ 40%]
tests/helpers/test_device_info_helpers.py ..                             [ 42%]
tests/helpers/test_entity_helpers.py .                                   [ 42%]
tests/helpers/test_schema.py ..                                          [ 44%]
tests/helpers/test_ssid_status_calculator.py .                           [ 44%]
tests/helpers/test_ssid_status_calculator_extended.py ....               [ 47%]
tests/hubs/test_network.py .....                                         [ 50%]
tests/hubs/test_organization.py ....                                     [ 52%]
tests/meraki_select/test_content_filtering_select.py .                   [ 53%]
tests/meraki_select/test_meraki_content_filtering.py .                   [ 54%]
tests/sensor/device/test_appliance_port.py .                             [ 54%]
tests/sensor/device/test_appliance_uplink.py .                           [ 55%]
tests/sensor/device/test_camera_analytics.py ..                          [ 56%]
tests/sensor/device/test_connected_clients.py ....                       [ 59%]
tests/sensor/device/test_data_usage.py ..                                [ 60%]
tests/sensor/device/test_device_status.py .                              [ 61%]
tests/sensor/device/test_meraki_firmware_status.py .                     [ 61%]
tests/sensor/device/test_poe_usage.py .                                  [ 62%]
tests/sensor/network/test_vlan.py .                                      [ 62%]
tests/sensor/ssid/test_ssid_connected_clients.py .                       [ 63%]
tests/sensor/test_meraki_wan1_connectivity.py .                          [ 64%]
tests/sensor/test_meraki_wan2_connectivity.py .                          [ 64%]
tests/sensor/test_network_clients.py .                                   [ 65%]
tests/sensor/test_org_clients.py ...                                     [ 67%]
tests/sensor/test_org_device_type_clients.py .                           [ 67%]
tests/sensor/test_setup_mt_sensors.py .....                              [ 71%]
tests/services/test_device_control_service.py .                          [ 71%]
tests/services/test_network_control_service.py ..                        [ 72%]
tests/services/test_switch_port_service.py ....                          [ 75%]
tests/switch/test_adult_content_filtering.py ....                        [ 77%]
tests/switch/test_camera_profiles.py ss                                  [ 79%]
tests/switch/test_content_filtering_switch.py ....                       [ 81%]
tests/switch/test_meraki_ssid_device_switch.py ..                        [ 83%]
tests/switch/test_mt40_power_outlet.py ....                              [ 85%]
tests/switch/test_vlan_dhcp.py ...                                       [ 87%]
tests/test_authentication.py ...                                         [ 89%]
tests/test_camera_control.py ..                                          [ 90%]
tests/test_config_flow.py ...                                            [ 92%]
tests/test_device_naming.py ...                                          [ 94%]
tests/test_e2e_web_ui.py s                                               [ 94%]
tests/test_integration_setup.py ..                                       [ 96%]
tests/test_simple.py .                                                   [ 96%]
tests/test_ssid_device_representation.py .                               [ 97%]
tests/test_webhook.py ...                                                [ 99%]
tests/text/test_meraki_ssid_name.py .                                    [100%]

=================================== FAILURES ===================================
________________________ test_entity_disabled_if_no_url ________________________

mock_coordinator = <MagicMock id='140210245078864'>
mock_config_entry = <MagicMock id='140210245091056'>
mock_camera_service = <AsyncMock id='140210244656816'>

    def test_entity_disabled_if_no_url(
        mock_coordinator: MagicMock,
        mock_config_entry: MagicMock,
        mock_camera_service: AsyncMock,
    ) -> None:
        """
        Test that the camera entity is disabled if no stream URL is available.

        Args:
        ----
            mock_coordinator: The mocked coordinator.
            mock_config_entry: The mocked config entry.
            mock_camera_service: The mocked camera service.

        """
        # Arrange
        # Create a mock device with no way to determine a stream URL
        mock_device_no_url = dataclasses.replace(
            MOCK_CAMERA_DEVICE,
            video_settings={
                "rtspServerEnabled": True,
                "rtspUrl": None,
            },
            lan_ip=None,
        )

        # Act
        camera = MerakiCamera(
            mock_coordinator,
            mock_config_entry,
            mock_device_no_url,
            mock_camera_service,
        )

        # Assert
>       assert not camera.entity_registry_enabled_default
E       assert not True
E        +  where True = <entity unknown.unknown=unknown>.entity_registry_enabled_default

tests/camera/test_camera.py:258: AssertionError
=========================== short test summary info ============================
FAILED tests/camera/test_camera.py::test_entity_disabled_if_no_url - assert n...
================== 1 failed, 155 passed, 3 skipped in 15.56s ===================
